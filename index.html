<!DOCTYPE html>
<html style="width: 100%; height: 100%;">

<head>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/w2ui@1.5.3/w2ui-1.5.min.css">
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/w2ui@1.5.3/w2ui-1.5.min.js"></script>
</head>

<style>
	body {
		-moz-transform: scale(1.3);
		/* for Firefox, default 1*/
		zoom: 130%;
		/* For Chrome, IE, default 100%*/
	}

	.w2ui-head,
	.w2ui-grid-data {
		text-align: center;
	}
</style>

<body style="width: 100%; height: 100%; margin:0px;">
	<div id="grid" style="width: 100%; height: 100%;"></div>
	<script type="text/javascript">
		$(function () {
			$.get("https://kladara-19a52.firebaseio.com/games.json", function (data) {
				for (var i in data) {
					data[i].recid = i;
					var x = Math.abs(data[i].hs - data[i].as);
					var color;
					switch (true) {
						case (x >= 10):
							color = "#f2dede"; grade = 2;
							break;
						case (x >= 5):
							color = "#d0e9c6"; grade = 1;
							break;
						default:
							color = "none"; grade = 0;
							break;
					}

					data[i].w2ui = {"style": "background-color: " + color}
					data[i].grade = grade
					var calc1 = calc(data[i].hs, data[i].as, data[i].ha, data[i].aa)
					data[i].grade = calc1 > 0 ? 1 : 2
					data[i].rate = Math.abs(calc1)
				}

				$('#grid').w2grid({
					name: 'grid',
					show: {
						toolbar: true,
						footer: true
					},
					multiSearch: true,
					columnGroups: [
						{text: '', span: 2},
						{text: 'Home', span: 4},
						{text: 'Away', span: 4}
					],
					searches: [
						{field: 'min', label: 'Minute ', type: 'int'},
						{field: 'ha', label: 'Home Attacks', type: 'int'},
						{field: 'hs', label: 'Home Shots on target', type: 'int'},
						{field: 'hg', label: 'Home Goals', type: 'int'},
						{field: 'ag', label: 'Away Goals', type: 'int'},
						{field: 'as', label: 'Away Shots on target', type: 'int'},
						{field: 'aa', label: 'Away Attacks', type: 'int'},
						{field: 'rate', label: 'rate', type: 'int'},

					],
					columns: [
						{field: 'min', text: 'Min', size: '5%', sortable: true},
						{field: 'le', text: 'League', size: '15%', min: '100px', sortable: true},
						{field: 'ht', text: '', size: '20%', min: '100px'},
						{field: 'ha', text: 'â‡‹', size: '5%', sortable: true},
						{field: 'hs', text: 'ðŸ¥…', size: '5%', sortable: true},
						{field: 'hg', text: 'âš½', size: '5%', sortable: true},
						{field: 'ag', text: 'âš½', size: '5%', sortable: true},
						{field: 'as', text: 'ðŸ¥…', size: '5%', sortable: true},
						{field: 'aa', text: 'â‡‹', size: '5%', sortable: true},
						{field: 'at', text: '', size: '20%', min: '100px'},
						{field: 'grade', text: 'shootRate', size: '5%', sortable: true},
						{field: 'rate', text: 'rate', size: '5%', sortable: true},
					],
					records: data,
					sortData: [
						{field: 'ha', direction: 'desc'},
					]
				});
			});
		});

		function calc(a, b, c, d) {
			var x = 4 * (a - b) + (c - d)
			x = Math.round(x * 100) / 100
			return x
		}

	</script>
</body>

</html>